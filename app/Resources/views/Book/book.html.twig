{% import '_macros.html.twig' as _ %}
<div class="well book" itemscope itemtype="http://schema.org/Book">
	<div class="row">
		<div class="col-md-3">
			<div class="thumbnail popover-trigger" data-content="{{ book.annotation|nl2br }}" data-placement="right" style="width: 210px; max-width: 100%">
				{% if book.cover %}
					<a href="{{ _.thumb(book.cover, 1000) }}" class="thumb-link">
						<img src="{{ _.thumb(book.cover, 200) }}" width="200">
					</a>
				{% else %}
					<img src="{{ _.thumb('nocover.png', 200) }}" width="200">
				{% endif %}
			</div>
		</div>
		<div class="col-md-9">
			<dl class="dl-horizontal">
				{% for field in fields %}
					{{ _.printField(book, field, searchableFields) }}
				{% endfor %}
				<dt>...</dt>
				<dd>
					{{ _.printShowLink(book) }}
					{% if is_granted('ROLE_EDITOR') %}
						{{ _.printEditLink(book) }}
					{% endif %}
					{% if book.isIncomplete %}
						<span class="text-danger">
							Записът е непълен.
							{% if book.reasonWhyIncomplete is not empty %}
								({{ _.printSearchLink(book.reasonWhyIncomplete, 'reasonWhyIncomplete', searchableFields) }})
							{% endif %}
						</span>
					{% endif %}
					{% if book.nbScans == 0 %}
						<span class="text-danger">{{ _.printMissingScansSearchLink(searchableFields) }}</span>
					{% endif %}
				</dd>
			</dl>
		</div>
	</div>
</div>
